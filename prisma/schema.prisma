generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
  
model User {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  password  String
  updatedAt DateTime @updatedAt
  Has       Has[]

  @@map("users")
}

model Course {
  code     String     @id
  credits  Int
  Has      Has[]
  Course   PreReq[]   @relation("course")
  PreReq   PreReq[]   @relation("prereq")
  Requires Requires[]
}

model Has {
  courseCode String
  userId     Int
  Course     Course @relation(fields: [courseCode], references: [code])
  User       User   @relation(fields: [userId], references: [id])

  @@id([courseCode, userId])
}

model Degree {
  name     String     @id
  Requires Requires[]
}

model Requires {
  degreeName String
  courseCode String
  Course     Course @relation(fields: [courseCode], references: [code])
  Degree     Degree @relation(fields: [degreeName], references: [name])

  @@id([degreeName, courseCode])
}

model PreReq {
  courseCode String
  preReqCode String
  Course     Course @relation("course", fields: [courseCode], references: [code])
  PreReq     Course @relation("prereq", fields: [preReqCode], references: [code])

  @@id([courseCode, preReqCode])
}